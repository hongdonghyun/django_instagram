{% extends 'common/base.html' %}
{% block content %}
{% load custom_tags %}
<div class="content">
    <h1>{{ cur_user }}</h1>
    {% if user != cur_user %}
    <form action="{% url 'member:follow_toggle' %} user_pk=cur_user.pk" method="POST">
        {% csrf_token %}
        {% if cur_user in user.following %}
        <button type="submit" class="btn">팔로우 취소</button>
        {% else %}
        <button type="submit" class="btn">팔로우</button>
        {% endif %}
    </form>
    {% endif %}

    <div>
        <h4>팔로워</h4>
        {% for followers in cur_user.followers %}
        <a href="{% url 'member:profile' user_pk=followers.pk %}" class="btn">
            {{ followers }}
        </a>
        {% endfor %}
    </div>

    <div>
        <h4>팔로잉</h4>
        {% for following in cur_user.following %}
        <a href="{% url 'member:profile' user_pk=following.pk %}" class="btn">
            {{ following }}

        </a>
        {% endfor %}
    </div>

    <ul class="profile-photo-list">
        {% for post in user_posts %}
        <li>
            <img src="{{ post.photo.url }}" alt="">
        </li>
        {% endfor %}

    </ul>
    {% if request.GET.page %}
    <a href="?page={{ request.GET.page|add:1 }}" class="btn">더 보기</a>
    {% else %}
    <a href="?page=2" class="btn btn-primary btn-block btn-lg">더 보기</a>
    {% endif %}
</div>
{% endblock %}